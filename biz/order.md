# 订单系统

每日订单增量十几二十万，根据订单id做了分库分表
业务上指定最多只能查到6个月之内的数据，6 * 30 * 15w = 2700w，现在MySQL热库的数据量在2-3千万左右
6个月之前的数据全都归档到冷库中
- 冷库采用什么？
- MySQL？HBase?
- 怎么同步的？

因为根据订单id进行了分表，站在用户和商家角度，产品需要根据多维度查询，比如商家根据店铺id，用户根据用户id


两种方法：
- 建立路由表，给用户 appID->orderID， userID -> orderID (性能差，但是存储成本低，采用这种)
- 冗余存储，给用户和店铺都存一份订单，走三个表 (性能好，但是存储成本高，数据一致性保证很麻烦)

但是对于复杂查询还是使用es，比如查询某个店铺下单订单列表，根据es进行搜索

除了面向用户和商家的基础查询，我们的业务部门 和 商家都需要进行一些统计分析，涉及到聚合查询，比如某个店铺下的用户画像，比如某个店铺下某段时间的营收
这些数据需要通过大数据部门来支持



## 大商家

标记法特库特表



